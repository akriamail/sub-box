📝 X-UI Subscribe Manager v1.0 README
🚀 项目简介
这是一个专为 X-UI 环境设计的极简订阅管理系统。它通过监控本地 config.ini 文件的变化，自动将节点链接转码为标准 Base64 订阅格式，并利用 Nginx 提供安全的 HTTPS 订阅分发。

✨ 核心特性 (v1.0 稳定版)
🎯 智能证书检索：自动深度扫描 /root/cert 目录，精准匹配域名证书与私钥，自动排除自签名证书。

🛠️ 完美兼容 vi/vim：针对 vi 编辑器的“临时文件覆盖”机制优化了 inotify 监控逻辑，确保保存即生效，不再断流。

🛡️ 零 404 漏洞：

强力权限管理：自动修正 www-data 用户对订阅文件的读取权限。

变量转义修复：Nginx 配置采用 $uri 原生匹配，杜绝路径解析错误。

⚡ 安装即同步：安装完成瞬间自动生成订阅文件，无需等待第一次修改。

📊 交互回显：安装完成后显式打印 安全 Token 和 完整订阅链接，管理更透明。

📂 目录结构
/opt/subscribe/：系统核心目录

config.ini：核心配置文件（在此编辑 Token、端口、证书路径和节点链接）

update.sh：后台实时监控与同步脚本

nginx_gen.sh：Nginx 配置自动生成脚本

/var/www/subscribe/：订阅文件分发目录（存放 Base64 后的 Token 文件）

🛠️ 使用说明
1. 安装与修复
直接运行脚本并选择选项 1，按向导输入域名即可。

2. 添加/修改节点
使用你喜欢的编辑器修改配置文件：

Bash

vi /opt/subscribe/config.ini
在 [nodes] 下方粘贴你的 vmess://、vless:// 或 ss:// 链接。保存退出（:wq）后，订阅链接将秒速更新。

3. 客户端使用
将脚本最后生成的链接填入 Shadowrocket 或 V2RayN 即可： https://你的域名:端口/你的Token

⚠️ 注意事项
防火墙：请确保你的云服务器安全组已放行设置的订阅端口（如 8080）。

证书位置：默认扫描路径为 /root/cert，请确保 X-UI 的证书存放在此目录下。

Token 安全：Token 是访问订阅的唯一凭证，请妥善保管。

📜 版本日志
2025-12-31 (v1.0)：

修复了 vi 编辑器修改导致的 inotify 失效 Bug。

修复了 root 权限创建文件导致的 Nginx 403/404 错误。

增强了域名证书自动匹配逻辑。
